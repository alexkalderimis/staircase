#!/bin/bash

set -e

export HOME=${OPENSHIFT_DATA_DIR}
export LEIN_HOME=${HOME}/lein

echo "Building application"

cd ${HOME}
echo "Home is $HOME, lein-home is $LEIN_HOME"
mkdir -p bin
mkdir -p $LEIN_HOME

wget https://raw.github.com/technomancy/leiningen/stable/bin/lein \
     -O bin/lein

chmod +x bin/lein

echo "Compiling application"

cd $OPENSHIFT_REPO_DIR
${HOME}/bin/lein compile :all

return 0
